[gd_scene load_steps=35 format=3 uid="uid://csk7y7y8vgg6l"]

[ext_resource type="Script" uid="uid://dtkbvehtmy3em" path="res://object/stage/StageSettings.cs" id="1_g84th"]
[ext_resource type="PackedScene" uid="uid://npgcl1ctbjyt" path="res://area/5 pirate storm/act 1/environment/01Opening.tscn" id="2_444mk"]
[ext_resource type="PackedScene" uid="uid://ppx66n6n2ccl" path="res://area/5 pirate storm/act 1/environment/collision/Collision.tscn" id="2_bd1hp"]
[ext_resource type="Curve3D" uid="uid://cf6blfiw78u2v" path="res://area/5 pirate storm/act 1/environment/path/OpeningShipPath.tres" id="2_hm1f8"]
[ext_resource type="PackedScene" uid="uid://c6jerupko3il7" path="res://area/5 pirate storm/act 1/environment/02Islands.tscn" id="3_duubi"]
[ext_resource type="PackedScene" uid="uid://b0fx4f7js5dyt" path="res://area/5 pirate storm/act 1/environment/03Ships.tscn" id="4_ep74v"]
[ext_resource type="PackedScene" uid="uid://boal0kmojcixy" path="res://area/5 pirate storm/act 1/environment/04Grotto.tscn" id="5_h4y5m"]
[ext_resource type="PackedScene" uid="uid://c14vakcmcerx5" path="res://area/5 pirate storm/act 1/environment/05Cave.tscn" id="6_x0cas"]
[ext_resource type="PackedScene" uid="uid://dnlu6nswrjyrn" path="res://area/5 pirate storm/act 1/environment/06GhostShip.tscn" id="7_0trx6"]
[ext_resource type="PackedScene" uid="uid://o4wc1a8agm1k" path="res://area/5 pirate storm/act 1/environment/07End.tscn" id="8_18uju"]
[ext_resource type="PackedScene" uid="uid://iavqy6pjpw62" path="res://area/5 pirate storm/act 1/environment/Sea1.tscn" id="9_v0vsi"]
[ext_resource type="PackedScene" uid="uid://beejs2we1ggra" path="res://area/5 pirate storm/act 1/environment/Sea2.tscn" id="10_4ui3u"]
[ext_resource type="Curve3D" uid="uid://cggmnkknrdlau" path="res://area/5 pirate storm/act 1/environment/path/OpeningWoodPath.tres" id="12_duubi"]
[ext_resource type="Curve3D" uid="uid://efmihcpwdja7" path="res://area/5 pirate storm/act 1/environment/path/OpeningWood2Path.tres" id="13_18uju"]
[ext_resource type="Curve3D" uid="uid://2kcm4tbkk5oo" path="res://area/5 pirate storm/act 1/environment/path/BrokenShipPath.tres" id="14_v0vsi"]
[ext_resource type="Curve3D" uid="uid://ccswvucft2mrn" path="res://area/5 pirate storm/act 1/environment/path/IslandPath.tres" id="15_4ui3u"]
[ext_resource type="Curve3D" uid="uid://crk3chv8shprl" path="res://area/5 pirate storm/act 1/environment/path/BulletPath.tres" id="16_28ai1"]
[ext_resource type="Curve3D" uid="uid://bjj0wim3x1on6" path="res://area/5 pirate storm/act 1/environment/path/ShipPath.tres" id="17_bd1hp"]
[ext_resource type="Curve3D" uid="uid://08sw78spkitf" path="res://area/5 pirate storm/act 1/environment/path/CavePath.tres" id="18_v0vsi"]
[ext_resource type="Curve3D" uid="uid://vu01n3t3qdt7" path="res://area/5 pirate storm/act 1/environment/path/BoatPath.tres" id="19_4ui3u"]
[ext_resource type="Curve3D" uid="uid://ch7hul73n0udk" path="res://area/5 pirate storm/act 1/environment/path/GrindPath.tres" id="19_28ai1"]
[ext_resource type="AudioStream" uid="uid://bdupjn76esufr" path="res://sound/ost/adventure disc/9 No Way Through.mp3" id="22_m37yi"]
[ext_resource type="PackedScene" uid="uid://bn6wr6l8s3qyt" path="res://object/trigger/StageTrigger.tscn" id="22_ypnsc"]
[ext_resource type="Script" uid="uid://bvmyay4bo83qu" path="res://object/trigger/modules/DeathTrigger.cs" id="23_k720b"]
[ext_resource type="Script" uid="uid://cj76gvi7tbku6" path="res://sound/script/BGMPlayer.cs" id="23_s1a7j"]
[ext_resource type="Script" uid="uid://bssd28yqn1cxg" path="res://object/trigger/modules/PathTrigger.cs" id="23_vf6sl"]
[ext_resource type="PackedScene" uid="uid://0o1ds8o5k04j" path="res://effect/buffer/PlanarReflectionRenderer.tscn" id="24_havkg"]
[ext_resource type="Material" uid="uid://8kc12fso5xr1" path="res://area/5 pirate storm/data/material/Water.tres" id="25_88ndg"]

[sub_resource type="BoxShape3D" id="BoxShape3D_k720b"]
size = Vector3(25, 20, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_vf6sl"]
size = Vector3(50, 80, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_f6rbm"]
size = Vector3(500, 5, 500)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ypnsc"]
sky_top_color = Color(0.1457, 0.17856, 0.31, 1)
sky_horizon_color = Color(0.274573, 0.281921, 0.29352, 1)
ground_bottom_color = Color(0.198287, 0.1176, 0.49, 1)
ground_horizon_color = Color(0.274573, 0.281921, 0.29352, 1)

[sub_resource type="Sky" id="Sky_qkxl1"]
sky_material = SubResource("ProceduralSkyMaterial_ypnsc")

[sub_resource type="Environment" id="Environment_vf6sl"]
sky = SubResource("Sky_qkxl1")
ambient_light_source = 3
ambient_light_color = Color(0.495179, 0.460054, 0.343769, 1)
ambient_light_sky_contribution = 0.2
tonemap_mode = 2
tonemap_exposure = 1.5
glow_enabled = true

[node name="Static" type="Node3D" node_paths=PackedStringArray("pathParent", "Environment")]
script = ExtResource("1_g84th")
pathParent = NodePath("Path")
Environment = NodePath("WorldEnvironment")

[node name="Collision" parent="." instance=ExtResource("2_bd1hp")]
visible = false

[node name="Visuals" type="Node3D" parent="."]

[node name="CullingTriggers" type="Node3D" parent="Visuals"]
visible = false

[node name="02-L" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.642788, 0, 0.766044, 0, 1, 0, -0.766044, 0, 0.642788, -21.1544, 1.9, 198.981)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/02-L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="01-U" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.564, 2, 600.598)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/01-U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="03-L" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -129.154, 2, 716.981)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/03-L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="04-L" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -65.2, 28, 1430)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/04-L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_vf6sl")

[node name="03-U" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.0871557, 0, -0.996195, 0, 1, 0, 0.996195, 0, 0.0871557, -108.101, 1.8, 1584.98)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/03-U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="0506-L" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(-0.422618, 0, -0.906308, 0, 1, 0, 0.906308, 0, -0.422618, -413.867, 20, 1605.45)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/0506-L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="04-U" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 0.996195, -0.0871558, 0, 0.0871558, 0.996195, -517.921, 38.9015, 1676.1)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/04-U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="05-U" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.766044, 0, 0.642788, 0, 1, 0, -0.642788, 0, 0.766044, -512.687, 10.2594, 1844.1)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/05-U"]
shape = SubResource("BoxShape3D_k720b")

[node name="07-L" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.999086, 0, -0.0427476, 0, 1, 0, 0.0427476, 0, 0.999086, -503.936, 10.2, 1880.31)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/07-L"]
shape = SubResource("BoxShape3D_k720b")

[node name="06-U" parent="Visuals/CullingTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -495.649, 0.0593536, 2029.61)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingTriggers/06-U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="01Opening" parent="Visuals" instance=ExtResource("2_444mk")]

[node name="02Islands" parent="Visuals" instance=ExtResource("3_duubi")]

[node name="Sea1" parent="Visuals" instance=ExtResource("9_v0vsi")]

[node name="03Ships" parent="Visuals" instance=ExtResource("4_ep74v")]

[node name="04Grotto" parent="Visuals" instance=ExtResource("5_h4y5m")]

[node name="05Cave" parent="Visuals" instance=ExtResource("6_x0cas")]

[node name="Sea2" parent="Visuals" instance=ExtResource("10_4ui3u")]

[node name="06GhostShip" parent="Visuals" instance=ExtResource("7_0trx6")]

[node name="07End" parent="Visuals" instance=ExtResource("8_18uju")]

[node name="Path" type="Node3D" parent="."]

[node name="OpeningShipPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.426, -49.185)
curve = ExtResource("2_hm1f8")

[node name="OpeningWoodPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.003, 0.55, 63.919)
curve = ExtResource("12_duubi")

[node name="OpeningWood2Path" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.747, 9.575, 101.127)
curve = ExtResource("13_18uju")

[node name="BrokenShipPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.355, 3.107, 165.226)
curve = ExtResource("14_v0vsi")

[node name="IslandPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.874, 2, 364.778)
curve = ExtResource("15_4ui3u")

[node name="BulletPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -129.102, 104.707, 770.746)
curve = ExtResource("16_28ai1")

[node name="ShipPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -129.888, 33.118, 1031.93)
curve = ExtResource("17_bd1hp")

[node name="CavePath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -65.24, 2.064, 1547.18)
curve = ExtResource("18_v0vsi")

[node name="GrindPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -515.492, 55.231, 1584.07)
curve = ExtResource("19_28ai1")

[node name="BoatPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -497.085, 0, 1958.05)
curve = ExtResource("19_4ui3u")

[node name="Triggers" type="Node3D" parent="."]

[node name="WaterTrigger" parent="Triggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -3, 100)
"Enter Mode" = 0

[node name="Path" type="Node3D" parent="Triggers/WaterTrigger"]
script = ExtResource("23_k720b")
triggerType = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="Triggers/WaterTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.5, 0)
shape = SubResource("BoxShape3D_f6rbm")

[node name="PathTriggers" type="Node3D" parent="Triggers"]

[node name="OpeningWood" parent="Triggers/PathTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.991445, 0, 0.130526, 0, 1, 0, -0.130526, 0, 0.991445, -1.84013, 0.5, 64.4712)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="Path" type="Node3D" parent="Triggers/PathTriggers/OpeningWood" node_paths=PackedStringArray("path")]
script = ExtResource("23_vf6sl")
path = NodePath("../../../../Path/OpeningWoodPath")
cameraPathBlendTime = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Triggers/PathTriggers/OpeningWood"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="OpeningWood2" parent="Triggers/PathTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.887011, 0, -0.461749, 0, 1, 0, 0.461749, 0, 0.887011, 0.304016, 9.3, 103.673)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="Path" type="Node3D" parent="Triggers/PathTriggers/OpeningWood2" node_paths=PackedStringArray("path")]
script = ExtResource("23_vf6sl")
path = NodePath("../../../../Path/OpeningWood2Path")
cameraPathBlendTime = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Triggers/PathTriggers/OpeningWood2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="BrokenShip" parent="Triggers/PathTriggers" instance=ExtResource("22_ypnsc")]
transform = Transform3D(0.843392, -0.0933011, -0.529137, -7.91624e-09, 0.984808, -0.173648, 0.5373, 0.146453, 0.830578, -37.3201, 2.39763, 168.903)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="Path" type="Node3D" parent="Triggers/PathTriggers/BrokenShip" node_paths=PackedStringArray("path")]
script = ExtResource("23_vf6sl")
path = NodePath("../../../../Path/BrokenShipPath")
cameraPathBlendTime = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Triggers/PathTriggers/BrokenShip"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_k720b")

[node name="Lighting" type="Node3D" parent="."]

[node name="Exterior" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
layers = 1024
light_color = Color(0.91, 0.925, 1, 1)
light_energy = 2.0
light_cull_mask = 4293918722
shadow_enabled = true
shadow_caster_mask = 4293918785

[node name="Interior" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
layers = 1024
light_color = Color(0.697159, 0.804547, 0.963584, 1)
light_energy = 2.0
light_cull_mask = 4293918724
shadow_enabled = true
shadow_caster_mask = 4293918785

[node name="Objects" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
layers = 1024
light_color = Color(0.697159, 0.804547, 0.963584, 1)
light_energy = 2.0
light_cull_mask = 4293918724

[node name="PlanarReflectionRenderer" parent="." instance=ExtResource("24_havkg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -263, -3.1, 1562)
reflectionMaterials = [ExtResource("25_88ndg")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_vf6sl")

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("22_m37yi")
bus = &"BGM"
script = ExtResource("23_s1a7j")
loopStartPosition = 7.44
loopEndPosition = 227.86
isStageMusic = true

[connection signal="Activated" from="Visuals/CullingTriggers/02-L" to="Visuals/02Islands" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/02-L" to="Visuals/02Islands" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingTriggers/01-U" to="Visuals/01Opening" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/01-U" to="Visuals/01Opening" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/03-L" to="Visuals/03Ships" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/03-L" to="Visuals/03Ships" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingTriggers/04-L" to="Visuals/04Grotto" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/04-L" to="Visuals/04Grotto" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingTriggers/03-U" to="Visuals/03Ships" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/03-U" to="Visuals/03Ships" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/0506-L" to="Visuals/05Cave" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/0506-L" to="Visuals/06GhostShip" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/0506-L" to="Visuals/Sea2" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/0506-L" to="Visuals/05Cave" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/0506-L" to="Visuals/06GhostShip" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/0506-L" to="Visuals/Sea2" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingTriggers/04-U" to="Visuals/04Grotto" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/04-U" to="Visuals/04Grotto" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/05-U" to="Visuals/05Cave" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/05-U" to="Visuals/05Cave" method="Activate"]
[connection signal="Activated" from="Visuals/CullingTriggers/07-L" to="Visuals/07End" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/07-L" to="Visuals/07End" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingTriggers/06-U" to="Visuals/06GhostShip" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingTriggers/06-U" to="Visuals/06GhostShip" method="Activate"]

[editable path="Collision"]
