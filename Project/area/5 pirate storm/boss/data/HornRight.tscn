[gd_scene load_steps=14 format=3 uid="uid://diu48uipdrlco"]

[ext_resource type="PackedScene" uid="uid://dj71abmvric1f" path="res://area/5 pirate storm/boss/data/model/HornRight.gltf" id="1_gh8l1"]
[ext_resource type="Script" uid="uid://c008fo010fo4v" path="res://area/5 pirate storm/data/script/CaptainBemothHorn.cs" id="2_gfbu0"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_hki7r"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rsdr4"]
animation = &"jolt-high"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cfg36"]
animation = &"jolt-low"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_5a73y"]
mix_mode = 1
fadeout_time = 0.02

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_glo1o"]
animation = &"RESET"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hki7r"]
animation = &"pop"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_glo1o"]
xfade_time = 0.05
input_0/name = "disabled"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "enabled"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5a73y"]
animation = &"pull"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_rsdr4"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_gh8l1"]
graph_offset = Vector2(-568.511, 162.356)
nodes/jolt_blend/node = SubResource("AnimationNodeBlend2_hki7r")
nodes/jolt_blend/position = Vector2(120, 260)
nodes/jolt_high_anim/node = SubResource("AnimationNodeAnimation_rsdr4")
nodes/jolt_high_anim/position = Vector2(-100, 540)
nodes/jolt_low_anim/node = SubResource("AnimationNodeAnimation_cfg36")
nodes/jolt_low_anim/position = Vector2(-100, 380)
nodes/jolt_trigger/node = SubResource("AnimationNodeOneShot_5a73y")
nodes/jolt_trigger/position = Vector2(300, 140)
nodes/normal_anim/node = SubResource("AnimationNodeAnimation_glo1o")
nodes/normal_anim/position = Vector2(-460, 100)
nodes/output/position = Vector2(500, 140)
nodes/pop_anim/node = SubResource("AnimationNodeAnimation_hki7r")
nodes/pop_anim/position = Vector2(-300, 340)
nodes/pop_transition/node = SubResource("AnimationNodeTransition_glo1o")
nodes/pop_transition/position = Vector2(-100, 140)
nodes/pull_anim/node = SubResource("AnimationNodeAnimation_5a73y")
nodes/pull_anim/position = Vector2(-460, 280)
nodes/pull_blend/node = SubResource("AnimationNodeBlend2_rsdr4")
nodes/pull_blend/position = Vector2(-300, 100)
node_connections = [&"jolt_blend", 0, &"jolt_low_anim", &"jolt_blend", 1, &"jolt_high_anim", &"jolt_trigger", 0, &"pop_transition", &"jolt_trigger", 1, &"jolt_blend", &"output", 0, &"jolt_trigger", &"pop_transition", 0, &"pull_blend", &"pop_transition", 1, &"pop_anim", &"pull_blend", 0, &"normal_anim", &"pull_blend", 1, &"pull_anim"]

[sub_resource type="SphereShape3D" id="SphereShape3D_yck8a"]

[node name="HornRight" node_paths=PackedStringArray("animator", "area") instance=ExtResource("1_gh8l1")]
script = ExtResource("2_gfbu0")
animator = NodePath("AnimationTree")
area = NodePath("HornAttachment/Lockon")
maxHealth = 40

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
active = false
tree_root = SubResource("AnimationNodeBlendTree_gh8l1")
anim_player = NodePath("../AnimationPlayer")
parameters/jolt_blend/blend_amount = 0
parameters/jolt_trigger/active = false
parameters/jolt_trigger/internal_active = false
parameters/jolt_trigger/request = 0
parameters/pop_transition/current_state = "disabled"
parameters/pop_transition/transition_request = ""
parameters/pop_transition/current_index = 0.001
parameters/pull_blend/blend_amount = 0.0

[node name="HornAttachment" type="BoneAttachment3D" parent="." index="3"]
transform = Transform3D(0.988519, -0.139431, -0.0582219, 0.140035, 0.990126, 0.0064027, 0.0567543, -0.0144823, 0.998283, -0.906666, 1.16587, -0.293154)
bone_name = "horn"
bone_idx = 1
use_external_skeleton = true
external_skeleton = NodePath("../HornRRoot/Skeleton3D")

[node name="Lockon" type="Area3D" parent="HornAttachment" index="0"]
transform = Transform3D(-0.0502984, 0.201736, 0.978148, -0.236635, 0.949092, -0.207912, -0.970296, -0.241922, -4.27562e-08, 0.05, -0.2, 0.05)
collision_layer = 4
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="HornAttachment/Lockon" index="0"]
shape = SubResource("SphereShape3D_yck8a")

[connection signal="area_entered" from="HornAttachment/Lockon" to="." method="OnEntered"]
