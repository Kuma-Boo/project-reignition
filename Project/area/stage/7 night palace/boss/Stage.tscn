[gd_scene load_steps=22 format=3]

[ext_resource type="Curve3D" path="res://area/stage/7 night palace/boss/environment/path/MainPath.tres" id="1"]
[ext_resource type="Environment" uid="uid://bv5yu2mslecue" path="res://area/stage/7 night palace/data/common/Environment.tres" id="4"]
[ext_resource type="Resource" uid="uid://cmesyjx0jp6ur" path="res://resource/preset/lockout/AutorunLockout.tres" id="4_nwrv5"]
[ext_resource type="PackedScene" path="res://area/stage/7 night palace/data/common/BossBGM.tscn" id="5"]
[ext_resource type="PackedScene" uid="uid://da3hlu0ny1pcq" path="res://area/stage/7 night palace/boss/environment/model/NPBossLOD.gltf" id="6"]
[ext_resource type="PackedScene" path="res://area/stage/7 night palace/boss/boss/Erazor.tscn" id="9"]
[ext_resource type="PackedScene" uid="uid://ch6ygjlfbysyw" path="res://object/player/CharacterSpawn.tscn" id="10"]
[ext_resource type="PackedScene" uid="uid://bn6wr6l8s3qyt" path="res://object/trigger/StageTrigger.tscn" id="11"]
[ext_resource type="PackedScene" path="res://area/stage/7 night palace/boss/environment/collision/Collision.tscn" id="11_e3dt0"]
[ext_resource type="PackedScene" path="res://area/stage/7 night palace/boss/environment/NPBoss.tscn" id="11_tu1m1"]
[ext_resource type="Script" path="res://object/trigger/modules/PathTrigger.cs" id="12"]
[ext_resource type="PackedScene" uid="uid://tdw4f3w4e2vb" path="res://area/stage/7 night palace/boss/environment/NPBossLOD.tscn" id="12_khpxi"]
[ext_resource type="Script" path="res://object/trigger/modules/CheckpointTrigger.cs" id="13"]
[ext_resource type="Script" path="res://object/stage/StageSettings.cs" id="14"]
[ext_resource type="Script" path="res://area/stage/7 night palace/boss/script/InfiniteHallway.cs" id="15"]
[ext_resource type="PackedScene" path="res://area/stage/7 night palace/boss/object/ItemBundle.tscn" id="16"]
[ext_resource type="Script" path="res://object/trigger/modules/LockoutTrigger.cs" id="18"]
[ext_resource type="PackedScene" uid="uid://crvf2h5ngmj01" path="res://effect/renderers/reflection/PlanarReflectionManager.tscn" id="18_puy33"]
[ext_resource type="Material" uid="uid://bee6ihp6x82qm" path="res://area/stage/7 night palace/data/environment/model/material/Effect Reflection.tres" id="19_iixim"]

[sub_resource type="SphereShape3D" id="9"]
radius = 3.0

[sub_resource type="BoxShape3D" id="10"]
size = Vector3(16, 28, 2)

[node name="Stage" type="Node"]

[node name="BossAct" type="Node3D" parent="."]
script = ExtResource("14")
"Starting Path" = NodePath("")
"Mission Type" = 0
"Time Limit" = 0.0
"Item Cycling/Activation Trigger" = NodePath("")
"Ranking/Skip Score" = false
"Ranking/Gold Time" = 0.0
"Ranking/Silver Time" = 0.0
"Ranking/Bronze Time" = 0.0
"Ranking/Gold Score" = 0
"Ranking/Silver Score" = 0
"Ranking/Bronze Score" = 0
Completion/Delay = 0.0
Completion/Lockout = null
Completion/Animator = NodePath("")

[node name="CharacterSpawn" parent="BossAct" instance=ExtResource("10")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -49)

[node name="SpawnTrigger" parent="BossAct/CharacterSpawn" instance=ExtResource("11")]
isOneShot = true

[node name="MainPath" type="Node3D" parent="BossAct/CharacterSpawn/SpawnTrigger" node_paths=PackedStringArray("path")]
script = ExtResource("12")
path = NodePath("../../../../Paths/MainPath")

[node name="Lockout" type="Node3D" parent="BossAct/CharacterSpawn/SpawnTrigger"]
script = ExtResource("18")
lockoutData = ExtResource("4_nwrv5")

[node name="Checkpoint" type="Node3D" parent="BossAct/CharacterSpawn/SpawnTrigger"]
script = ExtResource("13")

[node name="CollisionShape3D" type="CollisionShape3D" parent="BossAct/CharacterSpawn/SpawnTrigger"]
shape = SubResource("9")

[node name="Erazor" parent="BossAct" instance=ExtResource("9")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -70)

[node name="Visuals" type="Node3D" parent="."]

[node name="InfiniteHall" type="Node3D" parent="Visuals" node_paths=PackedStringArray("hallRoot", "itemBundle", "primaryCollision", "secondaryCollision")]
script = ExtResource("15")
hallRoot = NodePath("HallRoot")
itemBundle = NodePath("ItemBundle")
itemBundleLocations = [6, 18, 0]
primaryCollision = NodePath("../../Collision/PrimaryCollision")
secondaryCollision = NodePath("../../Collision/SecondaryCollision")

[node name="ItemBundle" parent="Visuals/InfiniteHall" instance=ExtResource("16")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -58)

[node name="HallRoot" parent="Visuals/InfiniteHall" instance=ExtResource("11_tu1m1")]

[node name="Hall2" parent="Visuals/InfiniteHall/HallRoot" instance=ExtResource("11_tu1m1")]
transform = Transform3D(0.999848, 0, 0.0174526, 0, 1, 0, -0.0174524, 0, 0.999858, 0, 0, -87)

[node name="Hall3" parent="Visuals/InfiniteHall/HallRoot/Hall2" instance=ExtResource("11_tu1m1")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, 0, 0, -87)

[node name="Hall4" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3" instance=ExtResource("11_tu1m1")]
transform = Transform3D(0.999849, 0, 0.0174512, 0, 1, 0, -0.0174515, 0, 0.999829, -0.000182629, 0, -86.9957)

[node name="Hall5" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4" instance=ExtResource("11_tu1m1")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, -6.67572e-06, 0, -87)

[node name="Hall6" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4/Hall5" instance=ExtResource("11_tu1m1")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, -1.51836, 0, -86.9868)

[node name="LOD1" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4/Hall5/Hall6" instance=ExtResource("12_khpxi")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, 9.53674e-06, 0, -87)

[node name="LOD2" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4/Hall5/Hall6/LOD1" instance=ExtResource("12_khpxi")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, -5.72205e-06, 0, -87.0001)

[node name="LOD3" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4/Hall5/Hall6/LOD1/LOD2" instance=ExtResource("6")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, -3.8147e-06, 0, -87)

[node name="LOD4" parent="Visuals/InfiniteHall/HallRoot/Hall2/Hall3/Hall4/Hall5/Hall6/LOD1/LOD2/LOD3" instance=ExtResource("12_khpxi")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, 0, 0, -87.0001)

[node name="AdvanceTrigger" parent="Visuals/InfiniteHall/HallRoot/Hall2" instance=ExtResource("11")]
transform = Transform3D(1, 0, -1.49012e-08, 0, 1, 0, 1.49012e-08, 0, 1, -0.628286, -1, -36.0057)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/InfiniteHall/HallRoot/Hall2/AdvanceTrigger"]
transform = Transform3D(1, 0, -5.58794e-09, 0, 1, 0, 5.58794e-09, 0, 1, 0, 15, 0)
shape = SubResource("10")

[node name="Moonlight" type="DirectionalLight3D" parent="Visuals"]
transform = Transform3D(2.563e-06, -0.642788, 0.766044, 0, 0.766044, 0.642788, -1, -1.64747e-06, 1.96337e-06, 12.4917, 0, -7.73828)
light_energy = 1.2
shadow_enabled = true
shadow_bias = 0.5
directional_shadow_blend_splits = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Visuals"]
environment = ExtResource("4")

[node name="Collision" type="Node3D" parent="."]
visible = false

[node name="PrimaryCollision" parent="Collision" instance=ExtResource("11_e3dt0")]

[node name="AdvanceTrigger" parent="Collision/PrimaryCollision" instance=ExtResource("11")]
transform = Transform3D(0.999848, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999848, 0, -1, -97)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Collision/PrimaryCollision/AdvanceTrigger"]
transform = Transform3D(1, 0, -5.58794e-09, 0, 1, 0, 5.58794e-09, 0, 1, 0, 15, 0)
shape = SubResource("10")

[node name="SecondaryCollision" parent="Collision" instance=ExtResource("11_e3dt0")]
transform = Transform3D(0.999847, 0, 0.0174524, 0, 1, 0, -0.0174524, 0, 0.999847, 0, 0, -87)

[node name="AdvanceTrigger" parent="Collision/SecondaryCollision" instance=ExtResource("11")]
transform = Transform3D(1, 0, -1.67638e-08, 0, 1, 0, 1.67638e-08, 0, 1, 0.867561, -1, -107.001)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Collision/SecondaryCollision/AdvanceTrigger"]
transform = Transform3D(1, 0, -5.58794e-09, 0, 1, 0, 5.58794e-09, 0, 1, 0, 15, 0)
shape = SubResource("10")

[node name="Paths" type="Node3D" parent="."]

[node name="MainPath" type="Path3D" parent="Paths"]
curve = ExtResource("1")

[node name="BGM" parent="." instance=ExtResource("5")]
autoplay = true
bus = &"Master"

[node name="PlanarReflectionManager" parent="." instance=ExtResource("18_puy33")]
reflectionMaterials = [ExtResource("19_iixim")]

[connection signal="DuelCompleted" from="BossAct/Erazor" to="Visuals/InfiniteHall" method="ResetHallway"]
[connection signal="Activated" from="Visuals/InfiniteHall/HallRoot/Hall2/AdvanceTrigger" to="Visuals/InfiniteHall" method="AdvanceHall" flags=3]
[connection signal="Activated" from="Collision/PrimaryCollision/AdvanceTrigger" to="Visuals/InfiniteHall" method="AdvanceCollision" flags=3 binds= [true]]
[connection signal="Activated" from="Collision/SecondaryCollision/AdvanceTrigger" to="Visuals/InfiniteHall" method="AdvanceCollision" flags=3 binds= [false]]
