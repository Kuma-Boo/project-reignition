[gd_scene load_steps=22 format=3 uid="uid://o41jh6rsst7l"]

[ext_resource type="PackedScene" path="res://area/stage/1 sand oasis/act 1/environment/collision/Collision.tscn" id="1_f75hx"]
[ext_resource type="PackedScene" uid="uid://efrfjkjxlfc8" path="res://area/stage/1 sand oasis/act 1/environment/01Opening.tscn" id="2_bo1n8"]
[ext_resource type="PackedScene" uid="uid://bu2kguc4ygtbo" path="res://area/stage/1 sand oasis/act 1/environment/02Slope.tscn" id="3_jy1b4"]
[ext_resource type="PackedScene" uid="uid://cq0d65qpud85m" path="res://area/stage/1 sand oasis/act 1/environment/03Oasis.tscn" id="4_cpur4"]
[ext_resource type="PackedScene" uid="uid://cn1pgixwy7otq" path="res://area/stage/1 sand oasis/act 1/environment/04Forest.tscn" id="5_1dxjy"]
[ext_resource type="PackedScene" uid="uid://bd40ra0xnjbfv" path="res://area/stage/1 sand oasis/data/skybox/Skybox.tscn" id="10_1sjhl"]
[ext_resource type="PackedScene" uid="uid://bn6wr6l8s3qyt" path="res://object/trigger/StageTrigger.tscn" id="12_ikken"]
[ext_resource type="Script" path="res://object/trigger/modules/LockoutTrigger.cs" id="13_wlo5a"]
[ext_resource type="Resource" uid="uid://38s0wkpi5mlf" path="res://resource/preset/lockout/RecenterLockout.tres" id="14_xulrk"]
[ext_resource type="Script" path="res://object/trigger/modules/CheckpointTrigger.cs" id="20_74cx5"]
[ext_resource type="Curve3D" uid="uid://brtouom1dta45" path="res://area/stage/1 sand oasis/act 1/environment/path/MainPath.tres" id="21_pob0f"]
[ext_resource type="Environment" uid="uid://b7gi55vdfsr1s" path="res://area/stage/1 sand oasis/data/environment/Environment.tres" id="25_h5wyu"]
[ext_resource type="PackedScene" uid="uid://7wm2nigdurx3" path="res://area/stage/1 sand oasis/data/environment/BGM.tscn" id="26_7jcp7"]
[ext_resource type="PackedScene" uid="uid://cbwcphc75t0y7" path="res://effect/buffer/DepthRenderer.tscn" id="27_e8jc8"]
[ext_resource type="PackedScene" uid="uid://bb0wbyqxrs175" path="res://effect/buffer/PlanarReflectionRenderer.tscn" id="28_oaiay"]
[ext_resource type="Material" uid="uid://5wxyrpeo8ycq" path="res://area/stage/1 sand oasis/data/environment/model/material/Water.tres" id="29_kjjxh"]

[sub_resource type="BoxShape3D" id="60"]
size = Vector3(42, 13.4, 38)

[sub_resource type="BoxShape3D" id="335"]
size = Vector3(12, 14, 16)

[sub_resource type="BoxShape3D" id="144"]
size = Vector3(34, 22, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_s3nwt"]
size = Vector3(10, 20, 5)

[sub_resource type="PlaneMesh" id="PlaneMesh_njmjg"]

[node name="Static" type="Node3D"]

[node name="Collision" parent="." instance=ExtResource("1_f75hx")]
visible = false

[node name="Visuals" type="Node3D" parent="."]

[node name="01Opening" parent="Visuals" instance=ExtResource("2_bo1n8")]
startEnabled = true

[node name="02Slope" parent="Visuals" instance=ExtResource("3_jy1b4")]

[node name="03Oasis" parent="Visuals" instance=ExtResource("4_cpur4")]

[node name="04Forest" parent="Visuals" instance=ExtResource("5_1dxjy")]

[node name="Skybox" parent="Visuals" instance=ExtResource("10_1sjhl")]

[node name="Trigger" type="Node3D" parent="."]

[node name="ZipperRecenterLockout" parent="Trigger" instance=ExtResource("12_ikken")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -166.5, -48.7, -95.9)
triggerMode = 2

[node name="Lockout" type="Node3D" parent="Trigger/ZipperRecenterLockout"]
script = ExtResource("13_wlo5a")
lockoutData = ExtResource("14_xulrk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/ZipperRecenterLockout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.31558, 6, -6.65269)
shape = SubResource("60")

[node name="CollisionShape2" type="CollisionShape3D" parent="Trigger/ZipperRecenterLockout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.1491, 6, 3.02882)
shape = SubResource("335")

[node name="CollisionShape3" type="CollisionShape3D" parent="Trigger/ZipperRecenterLockout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -31.8509, 6, -15.9712)
shape = SubResource("335")

[node name="Checkpoints" type="Node3D" parent="."]

[node name="Checkpoint1" parent="Checkpoints" instance=ExtResource("12_ikken")]
transform = Transform3D(0.422618, 0, 0.906308, 0, 1, 0, -0.906308, 0, 0.422618, -248.74, -40, -252.31)

[node name="Checkpoint" type="Node3D" parent="Checkpoints/Checkpoint1"]
script = ExtResource("20_74cx5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Checkpoints/Checkpoint1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)
shape = SubResource("144")

[node name="StageCulling" type="Node3D" parent="."]

[node name="SlopeCullTrigger" parent="StageCulling" instance=ExtResource("12_ikken")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 70, 75, -48)
triggerMode = 2
enterMode = 1
exitMode = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="StageCulling/SlopeCullTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 0)
shape = SubResource("BoxShape3D_s3nwt")

[node name="OasisCullTrigger" parent="StageCulling" instance=ExtResource("12_ikken")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 18, 100, -62)
triggerMode = 2
enterMode = 1
exitMode = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="StageCulling/OasisCullTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.1, 0)
shape = SubResource("BoxShape3D_s3nwt")

[node name="ForestCullTrigger" parent="StageCulling" instance=ExtResource("12_ikken")]
transform = Transform3D(0.642788, 0.766044, 0, -0.766044, 0.642788, 0, 0, 0, 1, -399.054, -48.0437, -202)
triggerMode = 2
enterMode = 1
exitMode = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="StageCulling/ForestCullTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.52588e-05, 9.80002, 0)
shape = SubResource("BoxShape3D_s3nwt")

[node name="Path" type="Node3D" parent="."]
visible = false

[node name="MainPath" type="Path3D" parent="Path"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 70.194, 75.003, 5.155)
curve = ExtResource("21_pob0f")

[node name="Lighting" type="Node3D" parent="."]

[node name="ExteriorLighting" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(0.984808, 0.163176, 0.0593912, 0, -0.34202, 0.939693, 0.173648, -0.925417, -0.336824, 0, 0, 0)
layers = 1024
light_color = Color(0.709804, 0.690196, 0.560784, 1)
light_energy = 1.2
light_cull_mask = 4293918723
shadow_enabled = true
shadow_bias = 0.05
directional_shadow_mode = 0
directional_shadow_max_distance = 50.0

[node name="LightBlockers" type="Node3D" parent="Lighting"]

[node name="Blocker1" type="MeshInstance3D" parent="Lighting/LightBlockers"]
transform = Transform3D(-4.63629e-07, -0.707107, -10.6066, 15, -4.37114e-08, 0, -4.63629e-07, -0.707107, 10.6066, 47.9197, 87.059, 25.7987)
layers = 0
mesh = SubResource("PlaneMesh_njmjg")

[node name="Blocker2" type="MeshInstance3D" parent="Lighting/LightBlockers"]
transform = Transform3D(30, 0, 0, 0, 2.005, 0, 0, 0, 30, 80.3533, 96.059, 14.2892)
layers = 0
mesh = SubResource("PlaneMesh_njmjg")

[node name="Blocker3" type="MeshInstance3D" parent="Lighting/LightBlockers"]
transform = Transform3D(15, 0, 0, 0, 1, 0, 0, 0, 30, 72.0533, 96.059, -43.7108)
layers = 0
mesh = SubResource("PlaneMesh_njmjg")

[node name="ForestEntranceBlocker" type="MeshInstance3D" parent="Lighting/LightBlockers"]
transform = Transform3D(13.5946, 0, -12.6785, 0, 1, 0, 6.33927, 0, 27.1892, -64.1, -7.10509, -170)
layers = 0
mesh = SubResource("PlaneMesh_njmjg")

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lighting"]
environment = ExtResource("25_h5wyu")

[node name="BGM" parent="." instance=ExtResource("26_7jcp7")]

[node name="DepthRenderer" parent="." instance=ExtResource("27_e8jc8")]

[node name="PlanarReflectionRenderer" parent="." instance=ExtResource("28_oaiay")]
renderMask = 18
reflectionMaterials = [ExtResource("29_kjjxh")]
reflectorHeight = -50.0

[connection signal="Activated" from="StageCulling/SlopeCullTrigger" to="Visuals/02Slope" method="Activate"]
[connection signal="Deactivated" from="StageCulling/SlopeCullTrigger" to="Visuals/02Slope" method="Deactivate"]
[connection signal="Activated" from="StageCulling/OasisCullTrigger" to="Visuals/01Opening" method="Deactivate"]
[connection signal="Activated" from="StageCulling/OasisCullTrigger" to="Visuals/03Oasis" method="Activate"]
[connection signal="Deactivated" from="StageCulling/OasisCullTrigger" to="Visuals/01Opening" method="Activate"]
[connection signal="Deactivated" from="StageCulling/OasisCullTrigger" to="Visuals/03Oasis" method="Deactivate"]
[connection signal="Activated" from="StageCulling/ForestCullTrigger" to="Visuals/04Forest" method="Activate"]
[connection signal="Deactivated" from="StageCulling/ForestCullTrigger" to="Visuals/04Forest" method="Deactivate"]
