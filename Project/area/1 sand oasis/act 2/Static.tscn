[gd_scene load_steps=31 format=3 uid="uid://dlahdqcelwoq6"]

[ext_resource type="PackedScene" uid="uid://bju5wbc52yu36" path="res://area/1 sand oasis/act 2/environment/collision/Collision.tscn" id="1_3wq42"]
[ext_resource type="PackedScene" uid="uid://bqb57kpdy3sol" path="res://area/1 sand oasis/act 2/environment/01Opening.tscn" id="1_vn5mm"]
[ext_resource type="Script" path="res://object/stage/StageSettings.cs" id="1_yumdi"]
[ext_resource type="PackedScene" uid="uid://cthfyh01j304c" path="res://area/1 sand oasis/act 2/environment/02Islands.tscn" id="2_6nnkp"]
[ext_resource type="PackedScene" uid="uid://ymgoo55dnl82" path="res://area/1 sand oasis/act 2/environment/03Forest.tscn" id="3_2hkcl"]
[ext_resource type="PackedScene" uid="uid://bn6wr6l8s3qyt" path="res://object/trigger/StageTrigger.tscn" id="3_i2fbd"]
[ext_resource type="PackedScene" uid="uid://b68n6b3kxew50" path="res://area/1 sand oasis/act 2/environment/04Oasis.tscn" id="4_yda5x"]
[ext_resource type="PackedScene" uid="uid://d1bkok8ul55i5" path="res://area/1 sand oasis/act 2/environment/05Slope.tscn" id="5_c5ona"]
[ext_resource type="PackedScene" uid="uid://urib6vl71yjq" path="res://area/1 sand oasis/act 2/environment/06End.tscn" id="6_2ngjg"]
[ext_resource type="Curve3D" uid="uid://dny4rc3cmd8ss" path="res://area/1 sand oasis/act 2/environment/path/BeachPath.tres" id="9_28qpb"]
[ext_resource type="PackedScene" uid="uid://bom1n0hvfixo1" path="res://area/1 sand oasis/data/BGM.tscn" id="9_f1xur"]
[ext_resource type="PackedScene" uid="uid://bd40ra0xnjbfv" path="res://area/1 sand oasis/data/skybox/Skybox.tscn" id="9_hrwu5"]
[ext_resource type="PackedScene" uid="uid://etu2s6i547gb" path="res://object/trigger/state trigger/DriftTrigger.tscn" id="11_bmkuu"]
[ext_resource type="Curve3D" uid="uid://cfe75qcv7gap7" path="res://area/1 sand oasis/act 2/environment/path/UTurnPath.tres" id="11_emj1x"]
[ext_resource type="PackedScene" uid="uid://co2wg02egbm0x" path="res://object/trigger/state trigger/AutomationTrigger.tscn" id="11_x36jr"]
[ext_resource type="Script" path="res://object/trigger/modules/PathTrigger.cs" id="12_lmyha"]
[ext_resource type="Curve3D" uid="uid://582epg0j4r4n" path="res://area/1 sand oasis/act 2/environment/path/IslandEndPath.tres" id="12_n178a"]
[ext_resource type="Curve3D" uid="uid://dgxqpipn3h2k5" path="res://area/1 sand oasis/act 2/environment/path/IslandPath.tres" id="13_u061t"]
[ext_resource type="Curve3D" uid="uid://ct1vxqp41jv0v" path="res://area/1 sand oasis/act 2/environment/path/OasisPath.tres" id="14_5rbnr"]
[ext_resource type="Script" path="res://object/trigger/modules/DeathTrigger.cs" id="14_ydmtp"]

[sub_resource type="BoxShape3D" id="BoxShape3D_50thi"]
size = Vector3(15, 20, 2.5)

[sub_resource type="SphereShape3D" id="SphereShape3D_apnef"]
radius = 2.0

[sub_resource type="BoxShape3D" id="BoxShape3D_n46k6"]
size = Vector3(150, 2, 300)

[sub_resource type="Gradient" id="Gradient_lbers"]
offsets = PackedFloat32Array(0.791045)
colors = PackedColorArray(1, 0.415, 0.1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_auj1f"]
gradient = SubResource("Gradient_lbers")

[sub_resource type="Gradient" id="Gradient_4slir"]
interpolation_color_space = 2
offsets = PackedFloat32Array(0.149485, 0.365979, 0.5, 0.994845)
colors = PackedColorArray(0, 0.654735, 0.948889, 1, 0.952253, 0.690817, 1, 1, 0, 0.116667, 1, 1, 0, 0.654735, 0.948889, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_inq5n"]
gradient = SubResource("Gradient_4slir")
use_hdr = true
fill_from = Vector2(0.982906, 1)

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_ea1lp"]
panorama = SubResource("GradientTexture2D_inq5n")

[sub_resource type="Sky" id="Sky_cdpwp"]
resource_local_to_scene = true
sky_material = SubResource("PanoramaSkyMaterial_ea1lp")
radiance_size = 1

[sub_resource type="Environment" id="Environment_raoto"]
background_mode = 2
sky = SubResource("Sky_cdpwp")
sky_rotation = Vector3(0.307178, 0, 0)
ambient_light_source = 3
ambient_light_color = Color(0.402667, 0.36, 1, 1)
ambient_light_sky_contribution = 0.4
ambient_light_energy = 0.3
reflected_light_source = 2
tonemap_mode = 2
tonemap_exposure = 0.79
tonemap_white = 1.3
ssao_radius = 3.19
ssao_intensity = 3.36
ssao_detail = 0.0
ssil_enabled = true
ssil_sharpness = 0.9
ssil_normal_rejection = 0.8
glow_enabled = true
glow_intensity = 6.0
glow_strength = 0.97
glow_blend_mode = 1
glow_hdr_threshold = 3.5
glow_hdr_scale = 1.0
glow_map_strength = 1.0
glow_map = SubResource("GradientTexture1D_auj1f")
fog_enabled = true
fog_light_color = Color(0.533585, 0.699592, 1, 1)
fog_density = 0.0002
fog_sky_affect = 0.0
adjustment_enabled = true
adjustment_saturation = 1.2

[node name="Static" type="Node3D" node_paths=PackedStringArray("pathParent", "Environment")]
script = ExtResource("1_yumdi")
pathParent = NodePath("Paths")
Environment = NodePath("WorldEnvironment")

[node name="Collision" parent="." instance=ExtResource("1_3wq42")]
visible = false

[node name="Visuals" type="Node3D" parent="."]

[node name="CullingMap" type="Node3D" parent="Visuals"]
visible = false

[node name="0203L" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, -150.833, -65, -364.774)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/0203L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="01U" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(-0.989915, -4.10753e-08, 0.141662, -4.47354e-08, 1, -2.26524e-08, -0.141662, -2.87612e-08, -0.989915, -72.7514, -44.9994, -306.372)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/01U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="04L" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 60.2, -40, -170)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/04L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="02U" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(-0.439704, 0, -0.898143, 0, 1, 0, 0.898143, 0, -0.439704, -55.2527, -39.9994, -161.79)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/02U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="05L" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(0.642788, 0.766044, 0, -0.766044, 0.642788, 0, 0, 0, 1, -399.117, -48.0096, -197.781)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/05L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="03U" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -122.89, -45.3749, -62.0372)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/03U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="04U" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -57.8904, 35.0006, -62.0372)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/04U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="05U" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 70.1801, 75.0006, -51.34)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/05U"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="06L" parent="Visuals/CullingMap" instance=ExtResource("3_i2fbd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 2.339, 109.99, -62)
"Trigger Mode" = 2
"Exit Mode" = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visuals/CullingMap/06L"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="01Opening" parent="Visuals" instance=ExtResource("1_vn5mm")]
startEnabled = true

[node name="02Islands" parent="Visuals" instance=ExtResource("2_6nnkp")]

[node name="03Forest" parent="Visuals" instance=ExtResource("3_2hkcl")]

[node name="04Oasis" parent="Visuals" instance=ExtResource("4_yda5x")]

[node name="05Slope" parent="Visuals" instance=ExtResource("5_c5ona")]

[node name="06End" parent="Visuals" instance=ExtResource("6_2ngjg")]

[node name="Skybox" parent="Visuals" instance=ExtResource("9_hrwu5")]

[node name="Trigger" type="Node3D" parent="."]

[node name="Camera" type="Node3D" parent="Trigger"]

[node name="Object" type="Node3D" parent="Trigger"]

[node name="UTurn" parent="Trigger/Object" instance=ExtResource("11_x36jr")]
transform = Transform3D(0.986943, 0, -0.16107, 0, 1, 0, 0.16107, 0, 0.986943, -87.5717, -39.3286, -298.784)
endPoint = 70.0
ignoreDirection = true

[node name="ActivatePath" type="Node3D" parent="Trigger/Object/UTurn" node_paths=PackedStringArray("path")]
script = ExtResource("12_lmyha")
path = NodePath("../../../../Paths/UTurnPath")
affectCamera = false

[node name="DeactivatePath" type="Node3D" parent="Trigger/Object/UTurn" node_paths=PackedStringArray("path")]
script = ExtResource("12_lmyha")
path = NodePath("../../../../Paths/IslandEndPath")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/Object/UTurn"]
shape = SubResource("SphereShape3D_apnef")

[node name="DriftTrigger1" parent="Trigger/Object" instance=ExtResource("11_bmkuu")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, -303.254, -65.0013, -414.716)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/Object/DriftTrigger1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="DriftTrigger2" parent="Trigger/Object" instance=ExtResource("11_bmkuu")]
transform = Transform3D(-1, 0, 0, 0, 1, 0, 0, 0, -1, 60.156, -39.9994, -164.94)
isRightTurn = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/Object/DriftTrigger2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="DriftTrigger3" parent="Trigger/Object" instance=ExtResource("11_bmkuu")]
transform = Transform3D(4.37114e-08, 0, -1, 0, 1, 0, 1, 0, 4.37114e-08, 60.2251, 75.0006, -62.1688)
isRightTurn = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/Object/DriftTrigger3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_50thi")

[node name="WaterTrigger" parent="Trigger/Object" instance=ExtResource("3_i2fbd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 57.539, -51, -320.237)
"Enter Mode" = 0

[node name="Water" type="Node3D" parent="Trigger/Object/WaterTrigger"]
script = ExtResource("14_ydmtp")
triggerType = 1

[node name="CollisionShape3D" type="CollisionShape3D" parent="Trigger/Object/WaterTrigger"]
shape = SubResource("BoxShape3D_n46k6")

[node name="Paths" type="Node3D" parent="."]

[node name="BeachPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -315.179, -65.008, -426.619)
curve = ExtResource("9_28qpb")

[node name="UTurnPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -82.368, -40.029, -327.34)
curve = ExtResource("11_emj1x")

[node name="IslandEndPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -74.49, -45.002, -295.104)
curve = ExtResource("12_n178a")

[node name="IslandPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 117.538, -50.476, -435.33)
curve = ExtResource("13_u061t")

[node name="ForestPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 60.176, -39.999, -299.788)
curve = ExtResource("14_5rbnr")

[node name="BGM" parent="." instance=ExtResource("9_f1xur")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_raoto")

[connection signal="Activated" from="Visuals/CullingMap/0203L" to="Visuals/02Islands" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/0203L" to="Visuals/03Forest" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingMap/0203L" to="Visuals/02Islands" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/0203L" to="Visuals/03Forest" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/01U" to="Visuals/01Opening" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/01U" to="Visuals/01Opening" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/04L" to="Visuals/04Oasis" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingMap/04L" to="Visuals/04Oasis" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingMap/02U" to="Visuals/02Islands" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/02U" to="Visuals/02Islands" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/05L" to="Visuals/05Slope" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingMap/05L" to="Visuals/05Slope" method="Deactivate"]
[connection signal="Activated" from="Visuals/CullingMap/03U" to="Visuals/03Forest" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/03U" to="Visuals/03Forest" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/04U" to="Visuals/04Oasis" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/04U" to="Visuals/04Oasis" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/05U" to="Visuals/05Slope" method="Deactivate"]
[connection signal="Deactivated" from="Visuals/CullingMap/05U" to="Visuals/05Slope" method="Activate"]
[connection signal="Activated" from="Visuals/CullingMap/06L" to="Visuals/06End" method="Activate"]
[connection signal="Deactivated" from="Visuals/CullingMap/06L" to="Visuals/06End" method="Deactivate"]
[connection signal="Activated" from="Trigger/Object/UTurn" to="Trigger/Object/UTurn/ActivatePath" method="Activate"]
[connection signal="Deactivated" from="Trigger/Object/UTurn" to="Trigger/Object/UTurn/DeactivatePath" method="Activate"]
