[gd_scene load_steps=31 format=3 uid="uid://pqaytcsp2twi"]

[ext_resource type="Script" uid="uid://dtkbvehtmy3em" path="res://object/stage/StageSettings.cs" id="1_ul5kf"]
[ext_resource type="PackedScene" uid="uid://dar74l2eiux2t" path="res://effect/buffer/DepthRenderer.tscn" id="2_718ew"]
[ext_resource type="PackedScene" uid="uid://dur8p206no0vn" path="res://area/4 levitated ruin/act 3/environment/collision/Collision.tscn" id="2_o2x0g"]
[ext_resource type="PackedScene" uid="uid://cesleei0vilx5" path="res://area/4 levitated ruin/act 3/environment/Rukh1.tscn" id="2_ur2fq"]
[ext_resource type="AudioStream" uid="uid://d4flratl3ixxk" path="res://sound/ost/bonus disc/Levitated Ruin Act 3.mp3" id="3_ur2fq"]
[ext_resource type="PackedScene" uid="uid://c06ghybsci6mi" path="res://area/4 levitated ruin/data/skybox/Skybox.tscn" id="3_xu6y8"]
[ext_resource type="PackedScene" uid="uid://dart1s468mr5p" path="res://area/4 levitated ruin/act 3/environment/Rukh2.tscn" id="4_8dhk3"]
[ext_resource type="Script" uid="uid://cj76gvi7tbku6" path="res://sound/script/BGMPlayer.cs" id="4_xu6y8"]
[ext_resource type="PackedScene" uid="uid://dvw3hbgtjf325" path="res://area/4 levitated ruin/act 3/environment/Rukh3.tscn" id="5_d06nc"]
[ext_resource type="PackedScene" uid="uid://b106f1ewueu7s" path="res://area/4 levitated ruin/act 3/environment/Rukh4.tscn" id="6_75748"]
[ext_resource type="PackedScene" uid="uid://c184p4t00xpx" path="res://area/4 levitated ruin/act 3/environment/Rukh5.tscn" id="7_id8t7"]
[ext_resource type="Curve3D" path="res://area/4 levitated ruin/act 3/environment/path/BottomPath.tres" id="8_4prap"]
[ext_resource type="Script" uid="uid://bd2g6rmrn77eo" path="res://object/trigger/modules/LockoutTrigger.cs" id="8_id8t7"]
[ext_resource type="Resource" uid="uid://dg62uh7g5xdbg" path="res://area/4 levitated ruin/data/SkyroadLockout.tres" id="9_4prap"]
[ext_resource type="Curve3D" uid="uid://b7alt60i56jo4" path="res://area/4 levitated ruin/act 3/environment/path/SkyRoadPath1.tres" id="9_m4nyc"]
[ext_resource type="Curve3D" uid="uid://mei57cgq7vnr" path="res://area/4 levitated ruin/act 3/environment/path/SkyRoadPath2.tres" id="10_fw5eo"]
[ext_resource type="Resource" uid="uid://bhy1xqntrsc7p" path="res://area/4 levitated ruin/data/SkyroadGroundLockout.tres" id="10_j46ok"]
[ext_resource type="Curve3D" path="res://area/4 levitated ruin/act 3/environment/path/TopPath.tres" id="11_fw5eo"]
[ext_resource type="Curve3D" uid="uid://ddwcu518xw438" path="res://area/4 levitated ruin/act 3/environment/path/TowerPath.tres" id="12_h1rns"]
[ext_resource type="Curve3D" path="res://area/4 levitated ruin/act 3/environment/path/TowerTopPath.tres" id="13_tvodj"]
[ext_resource type="Curve3D" path="res://area/4 levitated ruin/act 3/environment/path/ZiplinePath.tres" id="14_8ftag"]
[ext_resource type="PackedScene" uid="uid://chp4atj2vfa7d" path="res://area/4 levitated ruin/act 3/environment/SkyRoad01.tscn" id="15_2k5mh"]
[ext_resource type="PackedScene" uid="uid://j7dkjf81un2n" path="res://area/4 levitated ruin/act 3/environment/SkyRoad02.tscn" id="16_k0h44"]
[ext_resource type="PackedScene" uid="uid://bn6wr6l8s3qyt" path="res://object/trigger/StageTrigger.tscn" id="16_v2r05"]
[ext_resource type="PackedScene" uid="uid://dtf23iudr7saa" path="res://object/enemy/gargoyle/GargoyleSkyroad.tscn" id="17_o2x0g"]
[ext_resource type="Script" uid="uid://bssd28yqn1cxg" path="res://object/trigger/modules/PathTrigger.cs" id="18_cuwbc"]
[ext_resource type="PackedScene" uid="uid://co2wg02egbm0x" path="res://object/trigger/state trigger/AutomationTrigger.tscn" id="23_cuwbc"]

[sub_resource type="BoxShape3D" id="BoxShape3D_arh3h"]
size = Vector3(5, 20, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_ee6d1"]
size = Vector3(5, 20, 5)

[sub_resource type="Environment" id="Environment_o2x0g"]
ambient_light_source = 2
ambient_light_color = Color(0.592718, 0.711016, 0.955683, 1)
ambient_light_energy = 0.5
tonemap_mode = 2
tonemap_exposure = 1.2
tonemap_white = 1.2
ssao_enabled = true
glow_enabled = true
glow_intensity = 0.4
glow_strength = 0.4
glow_bloom = 0.15
glow_blend_mode = 0
glow_hdr_threshold = 1.5
adjustment_enabled = true

[node name="Static" type="Node3D" node_paths=PackedStringArray("pathParent", "Environment")]
script = ExtResource("1_ul5kf")
pathParent = NodePath("Paths")
Environment = NodePath("WorldEnvironment")

[node name="Collision" parent="." instance=ExtResource("2_o2x0g")]
visible = false

[node name="Visuals" type="Node3D" parent="."]

[node name="LRSky" parent="Visuals" instance=ExtResource("3_xu6y8")]

[node name="Rukh1" parent="Visuals" instance=ExtResource("2_ur2fq")]

[node name="Rukh2" parent="Visuals" instance=ExtResource("4_8dhk3")]

[node name="Rukh3" parent="Visuals" instance=ExtResource("5_d06nc")]

[node name="Rukh4" parent="Visuals" instance=ExtResource("6_75748")]

[node name="Rukh5" parent="Visuals" instance=ExtResource("7_id8t7")]

[node name="Triggers" type="Node3D" parent="."]

[node name="Lighting" type="Node3D" parent="."]

[node name="MainLight" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(-0.866025, 1.02312e-07, 0.5, 0.482963, 0.258819, 0.836516, -0.129409, 0.965926, -0.224144, 0, 0, 0)
layers = 1024
light_color = Color(1, 0.771168, 0.471408, 1)
light_energy = 1.8
light_cull_mask = 4293918722
shadow_enabled = true

[node name="ObjectLight" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(0.939693, 0.17101, 0.296198, -0.0885213, -0.714911, 0.693589, 0.330366, -0.677981, -0.656659, 0, 0, 0)
layers = 1024
light_color = Color(1, 0.8, 0.415686, 1)
light_energy = 2.5
light_cull_mask = 4293918785

[node name="Paths" type="Node3D" parent="."]

[node name="BottomPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -63, -1400)
curve = ExtResource("8_4prap")

[node name="SkyRoad1" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, 10, -1387.19)
curve = ExtResource("9_m4nyc")

[node name="PathFollow3D" type="PathFollow3D" parent="Paths/SkyRoad1"]
transform = Transform3D(-0.999996, -4.12629e-05, -8.74191e-08, -4.12603e-05, 0.99995, -0.00943775, 4.76843e-07, -0.00943768, -0.999958, 0.0083, -73.7862, 50.1454)
progress = 532.0
loop = false

[node name="SkyRoad2" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -52, -1160)
curve = ExtResource("10_fw5eo")

[node name="TopPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -41, -1100)
curve = ExtResource("11_fw5eo")

[node name="TowerPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -30, -1367.21)
curve = ExtResource("12_h1rns")

[node name="TowerTopPath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 246.824, 10, -1367.33)
curve = ExtResource("13_tvodj")

[node name="ZiplinePath" type="Path3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -54.357, -1249.81)
curve = ExtResource("14_8ftag")

[node name="SkyRoad" type="Node3D" parent="."]

[node name="SkyroadLockout" type="Node3D" parent="SkyRoad"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40, -90.3, -978)
script = ExtResource("8_id8t7")
lockoutData = ExtResource("9_4prap")

[node name="SkyroadGroundLockout" type="Node3D" parent="SkyRoad"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40, -90.3, -978)
script = ExtResource("8_id8t7")
lockoutData = ExtResource("10_j46ok")

[node name="SkyRoad01" parent="SkyRoad" instance=ExtResource("15_2k5mh")]

[node name="GargoyleTrigger" parent="SkyRoad/SkyRoad01" instance=ExtResource("16_v2r05")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 244.767, 10, -1380.76)
"Enter Mode" = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkyRoad/SkyRoad01/GargoyleTrigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 9.5, 0)
shape = SubResource("BoxShape3D_arh3h")

[node name="Gargoyle" parent="SkyRoad/SkyRoad01" node_paths=PackedStringArray("activeRoad", "paths") instance=ExtResource("17_o2x0g")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, 4, -1396)
activeRoad = NodePath("..")
paths = [NodePath("../../../Paths/SkyRoad1")]

[node name="Lockout" parent="SkyRoad/SkyRoad01" instance=ExtResource("16_v2r05")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, 10, -1388)
"Enter Mode" = 0

[node name="Path" type="Node3D" parent="SkyRoad/SkyRoad01/Lockout" node_paths=PackedStringArray("path")]
script = ExtResource("18_cuwbc")
path = NodePath("../../../../Paths/SkyRoad1")
cameraPathBlendTime = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkyRoad/SkyRoad01/Lockout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_arh3h")

[node name="Lockout2" parent="SkyRoad/SkyRoad01" instance=ExtResource("16_v2r05")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, -27.6, -1420)
"Enter Mode" = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkyRoad/SkyRoad01/Lockout2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_arh3h")

[node name="AutomationTrigger1" parent="SkyRoad/SkyRoad01" instance=ExtResource("23_cuwbc")]
transform = Transform3D(0.909255, 0.00588231, -0.416198, -0.0858316, 0.98106, -0.173648, 0.407293, 0.193613, 0.892539, 276.275, -38.2, -1488.45)
endPoint = 375.0
ignoreDirection = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkyRoad/SkyRoad01/AutomationTrigger1"]
transform = Transform3D(1, -2.98023e-08, -1.49012e-08, 0, 1, 2.98023e-08, -1.49012e-08, 2.98023e-08, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_ee6d1")

[node name="AutomationTrigger2" parent="SkyRoad/SkyRoad01" instance=ExtResource("23_cuwbc")]
transform = Transform3D(0.642807, -0.00808773, 0.765985, 0.0115489, 0.999933, 0.000866171, -0.765941, 0.0082895, 0.642857, 247.066, -66.6758, -1412.59)
endPoint = 532.0
ignoreDirection = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="SkyRoad/SkyRoad01/AutomationTrigger2"]
transform = Transform3D(1, -2.98023e-08, -1.49012e-08, 0, 1, 2.98023e-08, -1.49012e-08, 2.98023e-08, 1, 0, 8, 0)
shape = SubResource("BoxShape3D_ee6d1")

[node name="SkyRoad02" parent="SkyRoad" instance=ExtResource("16_k0h44")]

[node name="GargoyleSkyroad" parent="SkyRoad/SkyRoad02" node_paths=PackedStringArray("activeRoad", "paths") instance=ExtResource("17_o2x0g")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 240, -52, -1147)
activeRoad = NodePath("..")
paths = [NodePath("../../../Paths/SkyRoad2")]

[node name="DepthRenderer" parent="." instance=ExtResource("2_718ew")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_o2x0g")

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_ur2fq")
bus = &"BGM"
script = ExtResource("4_xu6y8")
loopStartPosition = 0.855
loopEndPosition = 131.133
isStageMusic = true

[connection signal="Activated" from="SkyRoad/SkyRoad01/GargoyleTrigger" to="SkyRoad/SkyRoad01/Gargoyle" method="Activate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/Lockout" to="Collision/OneWayWall" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/Lockout" to="SkyRoad/SkyroadGroundLockout" method="Activate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/Lockout2" to="Collision/OneWayWall" method="Activate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/Lockout2" to="SkyRoad/SkyroadLockout" method="Activate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/Lockout2" to="SkyRoad/SkyroadGroundLockout" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="Collision/OneWayWall" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="SkyRoad/SkyroadLockout" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="SkyRoad/SkyroadGroundLockout" method="Activate"]
[connection signal="Deactivated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="Collision/OneWayWall" method="Activate"]
[connection signal="Deactivated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="SkyRoad/SkyroadLockout" method="Activate"]
[connection signal="Deactivated" from="SkyRoad/SkyRoad01/AutomationTrigger1" to="SkyRoad/SkyroadGroundLockout" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger2" to="Collision/OneWayWall" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger2" to="SkyRoad/SkyroadLockout" method="Deactivate"]
[connection signal="Activated" from="SkyRoad/SkyRoad01/AutomationTrigger2" to="SkyRoad/SkyroadGroundLockout" method="Activate"]
[connection signal="Deactivated" from="SkyRoad/SkyRoad01/AutomationTrigger2" to="Collision/OneWayWall" method="Activate"]
[connection signal="Deactivated" from="SkyRoad/SkyRoad01/AutomationTrigger2" to="SkyRoad/SkyroadGroundLockout" method="Deactivate"]

[editable path="Collision"]
