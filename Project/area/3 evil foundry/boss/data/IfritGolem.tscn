[gd_scene load_steps=51 format=3 uid="uid://dakk7vvkh050f"]

[ext_resource type="PackedScene" uid="uid://qtevb8yv6s3s" path="res://area/3 evil foundry/boss/data/model/IfritGolem.gltf" id="1_37vkv"]
[ext_resource type="PackedScene" uid="uid://bmgaktb3i28mo" path="res://area/3 evil foundry/boss/data/model/IfritGolemCollision.gltf" id="2_4kp3h"]
[ext_resource type="Script" path="res://area/3 evil foundry/data/script/IfritGolem.cs" id="2_jm400"]
[ext_resource type="PackedScene" uid="uid://b26mkp3yjneyj" path="res://area/3 evil foundry/boss/data/ArenaPlatform.tscn" id="2_nsyah"]
[ext_resource type="Script" path="res://object/trigger/modules/CullingTrigger.cs" id="2_v71j8"]
[ext_resource type="PackedScene" uid="uid://b7g26173gty07" path="res://area/3 evil foundry/boss/data/model/Lava.gltf" id="2_wope5"]
[ext_resource type="PackedScene" uid="uid://cayo6pq1qpjyf" path="res://area/3 evil foundry/boss/data/Core.tscn" id="4_0luyt"]
[ext_resource type="Script" path="res://object/stage/common/resource/script/Hazard.cs" id="5_rxyxv"]

[sub_resource type="BoxShape3D" id="BoxShape3D_utngs"]
size = Vector3(100, 5, 100)

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_g8eyb"]
filter_enabled = true
filters = ["IfritRoot/Skeleton3D:l_gear01", "IfritRoot/Skeleton3D:r_gear01", "IfritRoot/Skeleton3D:r_gear02"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_blrrc"]
animation = &"gear"

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_tpkn4"]
filter_enabled = true
filters = ["IfritRoot/Skeleton3D:head"]

[sub_resource type="AnimationNodeBlend3" id="AnimationNodeBlend3_4afst"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_q0q60"]
animation = &"RESET"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3wulk"]
animation = &"head-aim-l"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1nh3q"]
animation = &"head-aim-r"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8htir"]
animation = &"damage"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_m1srh"]
animation = &"hitstun-l"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_te46k"]
animation = &"hitstun-r"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5cjhc"]
animation = &"hitstun"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_udlwa"]
animation = &"recovery"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p6nqp"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_200v4"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nqpft"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_s4sr7"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jl7vf"]
xfade_time = 1.0
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gxqnd"]
xfade_time = 1.0
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_o4lpp"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_erj6u"]
states/damage/node = SubResource("AnimationNodeAnimation_8htir")
states/damage/position = Vector2(658, 100)
states/hitstun/node = SubResource("AnimationNodeAnimation_5cjhc")
states/hitstun/position = Vector2(487, 100)
states/hitstun-l/node = SubResource("AnimationNodeAnimation_m1srh")
states/hitstun-l/position = Vector2(344, 100)
states/hitstun-r/node = SubResource("AnimationNodeAnimation_te46k")
states/hitstun-r/position = Vector2(344, 33)
states/recovery/node = SubResource("AnimationNodeAnimation_udlwa")
states/recovery/position = Vector2(658, 33)
transitions = ["hitstun-r", "hitstun", SubResource("AnimationNodeStateMachineTransition_p6nqp"), "hitstun-l", "hitstun", SubResource("AnimationNodeStateMachineTransition_200v4"), "hitstun", "damage", SubResource("AnimationNodeStateMachineTransition_nqpft"), "hitstun", "recovery", SubResource("AnimationNodeStateMachineTransition_s4sr7"), "recovery", "End", SubResource("AnimationNodeStateMachineTransition_jl7vf"), "damage", "End", SubResource("AnimationNodeStateMachineTransition_gxqnd"), "Start", "hitstun-r", SubResource("AnimationNodeStateMachineTransition_o4lpp")]
graph_offset = Vector2(-129, -38)

[sub_resource type="Curve" id="Curve_upeqj"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_7saw6"]
fadein_time = 0.1
fadeout_time = 1.0
fadeout_curve = SubResource("Curve_upeqj")

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2c2kh"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_d7u7a"]
animation = &"step-l"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4k0jr"]
animation = &"step-r"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_clanm"]
xfade_time = 0.2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3eosp"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pl1k4"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6nwgh"]
xfade_time = 0.2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mruqk"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_21w4q"]
allow_transition_to_self = true
states/End/position = Vector2(462, 100)
states/idle/node = SubResource("AnimationNodeAnimation_2c2kh")
states/idle/position = Vector2(330, 100)
states/step-l/node = SubResource("AnimationNodeAnimation_d7u7a")
states/step-l/position = Vector2(330, 28)
states/step-r/node = SubResource("AnimationNodeAnimation_4k0jr")
states/step-r/position = Vector2(330, 178)
transitions = ["idle", "step-l", SubResource("AnimationNodeStateMachineTransition_clanm"), "step-l", "idle", SubResource("AnimationNodeStateMachineTransition_3eosp"), "step-r", "idle", SubResource("AnimationNodeStateMachineTransition_pl1k4"), "idle", "step-r", SubResource("AnimationNodeStateMachineTransition_6nwgh"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_mruqk")]
graph_offset = Vector2(-392, -20)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_021lr"]
animation = &"special-attack-start"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fdso3"]
animation = &"special-attack-stop"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uay87"]
animation = &"special-attack"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bheg3"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a6fgk"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sdtds"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cxewd"]
xfade_time = 1.0
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_x47fr"]
states/special-attack/node = SubResource("AnimationNodeAnimation_uay87")
states/special-attack/position = Vector2(554, 100)
states/special-attack-start/node = SubResource("AnimationNodeAnimation_021lr")
states/special-attack-start/position = Vector2(373, 100)
states/special-attack-stop/node = SubResource("AnimationNodeAnimation_fdso3")
states/special-attack-stop/position = Vector2(731, 100)
transitions = ["Start", "special-attack-start", SubResource("AnimationNodeStateMachineTransition_bheg3"), "special-attack-start", "special-attack", SubResource("AnimationNodeStateMachineTransition_a6fgk"), "special-attack", "special-attack-stop", SubResource("AnimationNodeStateMachineTransition_sdtds"), "special-attack-stop", "End", SubResource("AnimationNodeStateMachineTransition_cxewd")]
graph_offset = Vector2(-45, -18)

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_wjwst"]
fadein_time = 0.1
fadeout_time = 0.5
fadeout_curve = SubResource("Curve_upeqj")

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_bb4ub"]
graph_offset = Vector2(-1671, -58)
nodes/gear_add/node = SubResource("AnimationNodeAdd2_g8eyb")
nodes/gear_add/position = Vector2(-400, 0)
nodes/gear_anim/node = SubResource("AnimationNodeAnimation_blrrc")
nodes/gear_anim/position = Vector2(-600, 200)
nodes/head_add/node = SubResource("AnimationNodeAdd2_tpkn4")
nodes/head_add/position = Vector2(-200, 160)
nodes/head_blend/node = SubResource("AnimationNodeBlend3_4afst")
nodes/head_blend/position = Vector2(-400, 380)
nodes/head_center_anim/node = SubResource("AnimationNodeAnimation_q0q60")
nodes/head_center_anim/position = Vector2(-800, 440)
nodes/head_left_anim/node = SubResource("AnimationNodeAnimation_3wulk")
nodes/head_left_anim/position = Vector2(-600, 520)
nodes/head_right_anim/node = SubResource("AnimationNodeAnimation_1nh3q")
nodes/head_right_anim/position = Vector2(-600, 360)
nodes/hitstun_state/node = SubResource("AnimationNodeStateMachine_erj6u")
nodes/hitstun_state/position = Vector2(-800, 200)
nodes/hitstun_trigger/node = SubResource("AnimationNodeOneShot_7saw6")
nodes/hitstun_trigger/position = Vector2(-600, 0)
nodes/normal_state/node = SubResource("AnimationNodeStateMachine_21w4q")
nodes/normal_state/position = Vector2(-1000, 0)
nodes/output/position = Vector2(0, 180)
nodes/special_state/node = SubResource("AnimationNodeStateMachine_x47fr")
nodes/special_state/position = Vector2(-1000, 200)
nodes/special_trigger/node = SubResource("AnimationNodeOneShot_wjwst")
nodes/special_trigger/position = Vector2(-800, 0)
node_connections = [&"gear_add", 0, &"hitstun_trigger", &"gear_add", 1, &"gear_anim", &"head_add", 0, &"gear_add", &"head_add", 1, &"head_blend", &"head_blend", 0, &"head_right_anim", &"head_blend", 1, &"head_center_anim", &"head_blend", 2, &"head_left_anim", &"hitstun_trigger", 0, &"special_trigger", &"hitstun_trigger", 1, &"hitstun_state", &"output", 0, &"head_add", &"special_trigger", 0, &"normal_state", &"special_trigger", 1, &"special_state"]

[node name="IfritGolem" instance=ExtResource("1_37vkv")]
script = ExtResource("2_jm400")
root = NodePath("IfritRoot")
animationTree = NodePath("AnimationTree")

[node name="ArenaPlatform" parent="." index="0" instance=ExtResource("2_nsyah")]

[node name="Lava" parent="." index="1" instance=ExtResource("2_wope5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -15, 0)

[node name="LavaRipple1Mesh" parent="Lava" index="0"]
visible = false

[node name="LavaRipple2Mesh" parent="Lava" index="2"]
visible = false

[node name="LavaRipple3Mesh" parent="Lava" index="3"]
visible = false

[node name="LavaHazard" type="Area3D" parent="Lava" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.5, 0)
script = ExtResource("5_rxyxv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Lava/LavaHazard" index="0"]
shape = SubResource("BoxShape3D_utngs")

[node name="Skeleton3D" parent="IfritRoot" index="0"]
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(0.0865145, -5.01917e-21, -2.9041e-14, 0.996251)
bones/3/rotation = Quaternion(-0.0865154, -4.214e-09, -4.85256e-08, 0.996251)
bones/5/rotation = Quaternion(-3.63867e-07, 3.63867e-07, 0.707107, 0.707107)
bones/6/rotation = Quaternion(-3.63867e-07, 3.63867e-07, 0.707107, 0.707107)
bones/7/rotation = Quaternion(-4.87189e-07, 3.18355e-07, 0.707107, 0.707107)
bones/7/scale = Vector3(1, 1, 1)
bones/10/rotation = Quaternion(-7.82284e-07, 3.39026e-06, -0.707107, 0.707107)
bones/10/scale = Vector3(1, 1, 1)
bones/12/rotation = Quaternion(0.689228, -5.47678e-09, -5.20983e-09, 0.724545)
bones/12/scale = Vector3(1, 1, 1)
bones/13/rotation = Quaternion(0.689228, -5.47678e-09, -5.20984e-09, 0.724545)
bones/14/rotation = Quaternion(-0.689223, -1.09311e-08, 1.03981e-08, 0.72455)
bones/15/rotation = Quaternion(-0.689222, -1.09311e-08, 1.03981e-08, 0.72455)
bones/15/scale = Vector3(1, 1, 1)
bones/16/rotation = Quaternion(-0.689222, -1.09311e-08, 1.0398e-08, 0.724551)
bones/17/rotation = Quaternion(-3.69582e-07, -3.58153e-07, -0.707107, 0.707107)
bones/18/rotation = Quaternion(-5.63487e-07, -3.32835e-07, -0.707107, 0.707107)
bones/21/rotation = Quaternion(2.53355e-08, 1.43252e-07, 0.707107, 0.707107)
bones/23/rotation = Quaternion(0.689225, -5.54409e-12, -5.27092e-12, 0.724548)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(0.689225, -5.54409e-12, -5.27138e-12, 0.724548)
bones/24/scale = Vector3(1, 1, 1)
bones/25/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(-0.689225, 4.87039e-13, -4.63953e-13, 0.724547)
bones/28/rotation = Quaternion(-0.5, 0.500001, -0.499999, -0.499999)
bones/30/rotation = Quaternion(2.4407e-06, 2.91194e-06, 0.707108, 0.707106)
bones/30/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(-5.81513e-07, 4.33873e-07, 0.0824808, 0.996593)
bones/44/rotation = Quaternion(0.500001, 0.500001, -0.499999, 0.499999)
bones/46/rotation = Quaternion(2.54306e-06, -3.06247e-06, -0.707107, 0.707107)
bones/46/scale = Vector3(1, 1, 1)
bones/49/scale = Vector3(1, 1, 1)
bones/51/scale = Vector3(1, 1, 1)
bones/53/scale = Vector3(1, 1, 1)
bones/55/scale = Vector3(1, 1, 1)
bones/57/scale = Vector3(1, 1, 1)
bones/59/scale = Vector3(1, 1, 1)

[node name="BaseMesh" parent="IfritRoot/Skeleton3D" index="0"]
cast_shadow = 0

[node name="CoreMesh" parent="IfritRoot/Skeleton3D" index="1"]
cast_shadow = 0

[node name="GearMesh" parent="IfritRoot/Skeleton3D" index="2"]
cast_shadow = 0

[node name="PlateMesh" parent="IfritRoot/Skeleton3D" index="3"]
cast_shadow = 0

[node name="RCore1" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="4"]
transform = Transform3D(6.45678e-08, -1, 3.97259e-06, 1, 9.43608e-08, -7.56038e-06, 7.56038e-06, 3.9726e-06, 1, -37.8999, 8.8, 0.30003)
bone_name = "r_cylinder1"
bone_idx = 34

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/RCore1" index="0"]
transform = Transform3D(0.156434, -0.987688, 0, 0.987688, 0.156434, 0, 0, 0, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/RCore1/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="RCore2" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="5"]
transform = Transform3D(8.44351e-08, -1, 3.95272e-06, 1, 6.95258e-08, -7.56038e-06, 7.56038e-06, 3.95273e-06, 1, -37.8999, 8.80001, -0.999963)
bone_name = "r_cylinder2"
bone_idx = 38

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/RCore2" index="0"]
transform = Transform3D(0.156434, -0.987688, -4.25959e-09, 0.987688, 0.156434, -6.19722e-08, 6.18756e-08, 5.48744e-09, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/RCore2/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="RCore3" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="6"]
transform = Transform3D(1.48966e-08, -1, 3.99246e-06, 1, 5.95923e-08, -7.56038e-06, 7.56038e-06, 3.99246e-06, 1, -37.8999, 8.80001, -2.29996)
bone_name = "r_cylinder3"
bone_idx = 42

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/RCore3" index="0"]
transform = Transform3D(0.156434, -0.987688, 1.18526e-07, 0.987688, 0.156434, 1.85922e-07, -2.02175e-07, 8.79818e-08, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/RCore3/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="LCore1" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="7"]
transform = Transform3D(3.12923e-07, 1, -4.1352e-06, -1, 2.08604e-07, -7.41607e-06, -7.47568e-06, 4.04579e-06, 1, 37.9, 8.80001, -2.29996)
bone_name = "l_cylinder3"
bone_idx = 58

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/LCore1" index="0"]
transform = Transform3D(-0.156434, -0.987688, 0, 0.987688, -0.156434, 2.84217e-14, -1.42109e-14, -4.54747e-13, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/LCore1/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="LCore2" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="8"]
transform = Transform3D(2.9802e-07, 1, -4.09546e-06, -1, 1.93703e-07, -7.41607e-06, -7.47567e-06, 4.00606e-06, 1, 37.9, 8.80001, -0.999963)
bone_name = "l_cylinder2"
bone_idx = 54

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/LCore2" index="0"]
transform = Transform3D(-0.156434, -0.987688, 1.22785e-07, 0.987688, -0.156434, -2.47896e-07, 2.64052e-07, 8.24943e-08, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/LCore2/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="LCore3" type="BoneAttachment3D" parent="IfritRoot/Skeleton3D" index="9"]
transform = Transform3D(2.9802e-07, 1, -4.11533e-06, -1, 1.93703e-07, -7.41607e-06, -7.47567e-06, 4.02593e-06, 1, 37.9, 8.8, 0.300031)
bone_name = "l_cylinder1"
bone_idx = 50

[node name="Core" type="Node3D" parent="IfritRoot/Skeleton3D/LCore3" index="0"]
transform = Transform3D(-0.208058, -0.987688, 1.18525e-07, 1.31363, -0.156434, -1.85922e-07, 2.68892e-07, 8.79809e-08, 1, 0, 0, 0)

[node name="GolemCore" parent="IfritRoot/Skeleton3D/LCore3/Core" index="0" instance=ExtResource("4_0luyt")]

[node name="IfritGolemCollision" parent="IfritRoot" index="1" instance=ExtResource("2_4kp3h")]
script = ExtResource("2_v71j8")

[node name="AnimationPlayer" parent="." index="3"]
callback_mode_process = 0

[node name="AnimationTree" type="AnimationTree" parent="." index="4"]
active = false
callback_mode_process = 0
tree_root = SubResource("AnimationNodeBlendTree_bb4ub")
anim_player = NodePath("../AnimationPlayer")
parameters/gear_add/add_amount = 1.0
parameters/head_add/add_amount = 1.0
parameters/head_blend/blend_amount = 0
parameters/hitstun_trigger/active = false
parameters/hitstun_trigger/internal_active = false
parameters/hitstun_trigger/request = 0
parameters/special_trigger/active = false
parameters/special_trigger/internal_active = false
parameters/special_trigger/request = 0

[connection signal="area_entered" from="Lava/LavaHazard" to="Lava/LavaHazard" method="OnEntered"]
[connection signal="area_exited" from="Lava/LavaHazard" to="Lava/LavaHazard" method="OnExited"]

[editable path="Lava"]
