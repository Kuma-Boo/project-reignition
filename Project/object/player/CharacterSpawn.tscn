[gd_scene load_steps=8 format=2]

[ext_resource path="res://object/camera/Camera.tscn" type="PackedScene" id=1]
[ext_resource path="res://object/player/Sonic.tscn" type="PackedScene" id=2]
[ext_resource path="res://interface/gameplay/countdown/Countdown.tscn" type="PackedScene" id=3]
[ext_resource path="res://interface/gameplay/hud/HeadsUpDisplay.tscn" type="PackedScene" id=4]
[ext_resource path="res://interface/gameplay/pause/Pause.tscn" type="PackedScene" id=5]
[ext_resource path="res://interface/gameplay/results/StageResults.tscn" type="PackedScene" id=6]
[ext_resource path="res://object/camera/preset/NormalOpenCam.tres" type="Resource" id=7]

[node name="CharacterSpawn" type="Spatial"]

[node name="Player" parent="." instance=ExtResource( 2 )]
collision/safe_margin = 0.01

[node name="Camera" parent="." instance=ExtResource( 1 )]
targetSettings = ExtResource( 7 )

[node name="Interface" type="CanvasLayer" parent="."]
pause_mode = 2
layer = 64

[node name="Countdown" parent="Interface" instance=ExtResource( 3 )]

[node name="HeadsUpDisplay" parent="Interface" instance=ExtResource( 4 )]

[node name="StageResults" parent="Interface" instance=ExtResource( 6 )]

[node name="Pause" parent="Interface" instance=ExtResource( 5 )]
layer = 100

[connection signal="PlayerProcessed" from="Player" to="Camera" method="UpdateCamera"]
[connection signal="CountdownCompleted" from="Interface/Countdown" to="Player" method="CountdownCompleted"]
[connection signal="CountdownCompleted" from="Interface/Countdown" to="Interface/HeadsUpDisplay" method="SetVisibility" binds= [ true ]]
[connection signal="CountdownCompleted" from="Interface/Countdown" to="Interface/Pause" method="EnablePausing"]
[connection signal="CountdownStarted" from="Interface/Countdown" to="Player" method="CountdownStarted"]
[connection signal="CountdownStarted" from="Interface/Countdown" to="Interface/HeadsUpDisplay" method="SetVisibility" binds= [ false ]]
[connection signal="CountdownStarted" from="Interface/Countdown" to="Interface/Pause" method="DisablePausing"]
