[gd_scene load_steps=28 format=3 uid="uid://gp7nom61rmtj"]

[ext_resource type="Script" path="res://object/player/resource/script/CharacterEffect.cs" id="1_udd16"]
[ext_resource type="Resource" uid="uid://dkaxxcf5mo3ow" path="res://resource/preset/sfx library/ActionSFXLibrary.tres" id="2_fxiha"]
[ext_resource type="PackedScene" uid="uid://cupcp1cgd17wh" path="res://object/player/resource/effect/FootprintDecal.tscn" id="4_7l0ao"]
[ext_resource type="PackedScene" uid="uid://d2h4veiykf6nn" path="res://object/player/resource/effect/LandingDustParticle.tscn" id="5_58bv7"]
[ext_resource type="Resource" uid="uid://b74ouv2g73ny2" path="res://resource/preset/sfx library/MaterialSFXLibrary.tres" id="5_h4i1s"]
[ext_resource type="PackedScene" uid="uid://ck3jhmveflebn" path="res://object/player/resource/effect/WaterStepRing.tscn" id="7_83kla"]
[ext_resource type="PackedScene" uid="uid://bls68nf485o5s" path="res://object/player/resource/effect/DustParticle.tscn" id="8_svcok"]
[ext_resource type="Material" uid="uid://bduajl86aiq4o" path="res://object/player/resource/effect/material/Trail Material.tres" id="9_on86l"]
[ext_resource type="Script" path="res://core/custom nodes/Trail3D.cs" id="10_1mog6"]
[ext_resource type="PackedScene" uid="uid://d4niu0q5cqdvj" path="res://object/player/resource/effect/LandingWaterParticle.tscn" id="10_ip6u6"]
[ext_resource type="Material" uid="uid://dhlpdpuxf2cwi" path="res://object/player/resource/effect/material/Spin Material.tres" id="11_lk1sb"]
[ext_resource type="Shader" path="res://effect/shader/object/player/ScreenShock.gdshader" id="12_j6i3j"]
[ext_resource type="Shader" path="res://effect/shader/object/player/TimeBreak.gdshader" id="14_6clfa"]
[ext_resource type="Texture2D" uid="uid://47a1wqak6nce" path="res://object/player/resource/effect/texture/timebreak.png" id="15_p7iiw"]
[ext_resource type="Resource" uid="uid://svgihnonyl8d" path="res://resource/preset/sfx library/SonicVoiceLibrary.tres" id="33_pyanb"]

[sub_resource type="SphereMesh" id="SphereMesh_0nuab"]
radius = 0.4
height = 0.8
radial_segments = 32
rings = 16

[sub_resource type="Gradient" id="Gradient_tqkgi"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.5, 0.762646, 1)
colors = PackedColorArray(0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_0q2jh"]
gradient = SubResource("Gradient_tqkgi")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(1, 0.1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_q05ck"]
shader = ExtResource("12_j6i3j")
shader_parameter/wave_count = 20.0
shader_parameter/speed = 30.0
shader_parameter/height = 0.0
shader_parameter/factor_texture = SubResource("GradientTexture2D_0q2jh")

[sub_resource type="Animation" id="Animation_d5ix5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ScreenShock:material:shader_parameter/height")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ScreenShock:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ScreenShock:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_45gst"]
resource_name = "shock"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ScreenShock:material:shader_parameter/height")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 1),
"transitions": PackedFloat32Array(0.5, 2, 0.5, 1),
"update": 0,
"values": [0.0, 0.1, 0.05, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ScreenShock:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ScreenShock:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5ilpv"]
_data = {
"RESET": SubResource("Animation_d5ix5"),
"shock": SubResource("Animation_45gst")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_s8tqs"]
shader = ExtResource("14_6clfa")
shader_parameter/iterations = 5
shader_parameter/rotation_step = 0.02
shader_parameter/rotation_speed = 0.4
shader_parameter/opacity = 0.5
shader_parameter/lut = ExtResource("15_p7iiw")

[sub_resource type="Animation" id="Animation_f7t1y"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:material:shader_parameter/opacity")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.5]
}

[sub_resource type="Animation" id="Animation_ljny0"]
resource_name = "start"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:material:shader_parameter/opacity")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="Animation" id="Animation_hc4f1"]
resource_name = "stop"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:material:shader_parameter/opacity")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_m0ixc"]
_data = {
"RESET": SubResource("Animation_f7t1y"),
"start": SubResource("Animation_ljny0"),
"stop": SubResource("Animation_hc4f1")
}

[node name="Effect" type="Node3D" node_paths=PackedStringArray("actionChannel", "trailFX", "spinFX", "screenShockAnimator", "timeBreakAnimator", "dustParticle", "landingDustParticle", "footstepChannel", "landingChannel", "splashParticle", "waterStep", "voiceChannel")]
script = ExtResource("1_udd16")
actionSFXLibrary = ExtResource("2_fxiha")
actionChannel = NodePath("SFX/ActionChannel")
trailFX = NodePath("VFX/ActionFX/TrailMesh")
spinFX = NodePath("VFX/ActionFX/SpinMesh")
screenShockAnimator = NodePath("VFX/ScreenShock/AnimationPlayer")
timeBreakAnimator = NodePath("VFX/TimeBreak/AnimationPlayer")
dustParticle = NodePath("VFX/ActionFX/DustParticle")
materialSFXLibrary = ExtResource("5_h4i1s")
landingDustParticle = NodePath("VFX/LandingFX/LandingDustParticle")
footstepChannel = NodePath("SFX/FootstepChannel")
landingChannel = NodePath("SFX/LandingChannel")
splashParticle = NodePath("VFX/LandingFX/LandingWaterParticle")
footprintDecal = ExtResource("4_7l0ao")
waterStep = NodePath("VFX/StepFX/WaterStepRing")
voiceLibrary = ExtResource("33_pyanb")
voiceChannel = NodePath("SFX/VoiceChannel")

[node name="SFX" type="Node" parent="."]

[node name="VoiceChannel" type="AudioStreamPlayer" parent="SFX"]
bus = &"VOICE"

[node name="ActionChannel" type="AudioStreamPlayer" parent="SFX"]
bus = &"SFX"

[node name="LandingChannel" type="AudioStreamPlayer" parent="SFX"]
volume_db = 3.0
bus = &"SFX"

[node name="FootstepChannel" type="AudioStreamPlayer" parent="SFX"]
bus = &"SFX"

[node name="VFX" type="Node3D" parent="."]

[node name="ActionFX" type="Node3D" parent="VFX"]

[node name="DustParticle" parent="VFX/ActionFX" instance=ExtResource("8_svcok")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2, 0)

[node name="TrailMesh" type="Node3D" parent="VFX/ActionFX"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
script = ExtResource("10_1mog6")
layer = 32
material = ExtResource("9_on86l")

[node name="SpinMesh" type="MeshInstance3D" parent="VFX/ActionFX"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0.5, 0)
layers = 32
material_override = ExtResource("11_lk1sb")
transparency = 1.0
cast_shadow = 0
mesh = SubResource("SphereMesh_0nuab")
skeleton = NodePath("../..")

[node name="LandingFX" type="Node3D" parent="VFX"]

[node name="LandingWaterParticle" parent="VFX/LandingFX" instance=ExtResource("10_ip6u6")]

[node name="LandingDustParticle" parent="VFX/LandingFX" instance=ExtResource("5_58bv7")]

[node name="StepFX" type="Node3D" parent="VFX"]

[node name="WaterStepRing" parent="VFX/StepFX" instance=ExtResource("7_83kla")]

[node name="ScreenShock" type="ColorRect" parent="VFX"]
visible = false
material = SubResource("ShaderMaterial_q05ck")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(960, 540)
mouse_filter = 2
metadata/_edit_lock_ = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="VFX/ScreenShock"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_5ilpv")
}

[node name="TimeBreak" type="ColorRect" parent="VFX"]
visible = false
material = SubResource("ShaderMaterial_s8tqs")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(960, 540)
mouse_filter = 2
color = Color(1, 0.929412, 0.917647, 0)
metadata/_edit_lock_ = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="VFX/TimeBreak"]
libraries = {
"": SubResource("AnimationLibrary_m0ixc")
}
