[gd_scene load_steps=8 format=3 uid="uid://cx75joue8tyuv"]

[ext_resource type="Script" uid="uid://b4w7ai3qipkcv" path="res://core/PhysicsManager.cs" id="2_phpky"]
[ext_resource type="Resource" uid="uid://b8sc7aw2om4rw" path="res://resource/preset/lockout/run/StopRecenterLockout.tres" id="3_2cwqh"]
[ext_resource type="Script" uid="uid://cfkidvm0npvcm" path="res://core/DebugManager.cs" id="3_exwps"]
[ext_resource type="Script" uid="uid://dnwuwjerthod4" path="res://core/Runtime.cs" id="4_15wji"]
[ext_resource type="Script" uid="uid://b77s0r1vqdnfq" path="res://core/SaveManager.cs" id="4_au3sm"]
[ext_resource type="Resource" uid="uid://xatl072kgtjs" path="res://resource/skills/_SkillList.tres" id="5_32mxc"]
[ext_resource type="PackedScene" uid="uid://d0b2gvx7s6s8u" path="res://object/stage/pickups/Pearl.tscn" id="7_wy237"]

[node name="Core" type="Node"]
process_mode = 3

[node name="DebugManager" type="Node2D" parent="." node_paths=PackedStringArray("debugMenuRoot", "skillSelectButton", "skillToggleButton", "skillAugmentSlider", "freeCamData")]
top_level = true
script = ExtResource("3_exwps")
debugMenuRoot = NodePath("CanvasLayer/Menu")
skillSelectButton = NodePath("CanvasLayer/Menu/Tabs/Gameplay/Options/SkillSelect")
skillToggleButton = NodePath("CanvasLayer/Menu/Tabs/Gameplay/Options/SkillToggle")
skillAugmentSlider = NodePath("CanvasLayer/Menu/Tabs/Gameplay/Options/SkillAugment")
freeCamData = [NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/X"), NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/Y"), NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/Z"), NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Pitch"), NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Yaw"), NodePath("CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Roll")]

[node name="CanvasLayer" type="CanvasLayer" parent="DebugManager"]
layer = 128

[node name="Menu" type="ColorRect" parent="DebugManager/CanvasLayer"]
visible = false
offset_right = 448.0
offset_bottom = 1080.0
focus_mode = 1
color = Color(0.211765, 0.239216, 0.290196, 1)
metadata/_edit_lock_ = true

[node name="Tabs" type="TabContainer" parent="DebugManager/CanvasLayer/Menu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -200.0
offset_top = -516.0
offset_right = 200.0
offset_bottom = 516.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 16
current_tab = 1
tab_focus_mode = 0

[node name="Debug" type="Control" parent="DebugManager/CanvasLayer/Menu/Tabs"]
visible = false
layout_mode = 2
metadata/_tab_index = 0

[node name="Options" type="VBoxContainer" parent="DebugManager/CanvasLayer/Menu/Tabs/Debug"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = 25.0
offset_right = -24.0
offset_bottom = -24.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 16

[node name="DebugRays" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Draw Rays"

[node name="StageCulling" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
button_pressed = true
text = "Cull Stage"

[node name="UnlockAllStages" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Unlock Stages"

[node name="CameraPosition" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Draw Camera"

[node name="Gameplay" type="Control" parent="DebugManager/CanvasLayer/Menu/Tabs"]
layout_mode = 2
metadata/_tab_index = 1

[node name="Options" type="VBoxContainer" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = 25.0
offset_right = -24.0
offset_bottom = -24.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 16

[node name="Countdown" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
button_pressed = true
text = "Skip Countdown"

[node name="InfiniteSoul" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Inifinite Soul"

[node name="InfiniteRing" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Inifinite Ring"

[node name="CheckpointLabel" type="Label" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "Checkpoints"

[node name="SavePosition" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
text = "Save Position"

[node name="LoadPosition" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
text = "Load Position"

[node name="SkillLabel" type="Label" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "Skills"

[node name="SkillSelect" type="OptionButton" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
custom_minimum_size = Vector2(0, 64)
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 32
fit_to_longest_item = false

[node name="SkillAugment" type="HSlider" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
custom_minimum_size = Vector2(0, 64)
layout_mode = 2
min_value = -5.0
max_value = 5.0
rounded = true
scrollable = false
tick_count = 11
ticks_on_borders = true

[node name="SkillToggle" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 32
toggle_mode = true
text = "Equip Skill"

[node name="Promo" type="Control" parent="DebugManager/CanvasLayer/Menu/Tabs"]
visible = false
layout_mode = 2
focus_mode = 1
metadata/_tab_index = 2

[node name="Options" type="VBoxContainer" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = 25.0
offset_right = -24.0
offset_bottom = -24.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 16

[node name="HUD" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Hide HUD"

[node name="Reticle" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Hide Reticle"

[node name="Countdown" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Hide Countdown"

[node name="Dialog" type="Button" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
focus_mode = 0
theme_override_font_sizes/font_size = 36
toggle_mode = true
text = "Disable Dialog"

[node name="CamPositionLabel" type="Label" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "Camera Position"
vertical_alignment = 1

[node name="CamPosition" type="HBoxContainer" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
theme_override_constants/separation = 8
alignment = 1

[node name="X" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="Y" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="Z" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="CamRotationLabel" type="Label" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "Camera Rotation"
vertical_alignment = 1

[node name="CamRotation" type="HBoxContainer" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options"]
layout_mode = 2
theme_override_constants/separation = 8
alignment = 1

[node name="Pitch" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="Yaw" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="Roll" type="LineEdit" parent="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation"]
custom_minimum_size = Vector2(112, 64)
layout_mode = 2
theme_override_font_sizes/font_size = 28
text = "0"
alignment = 1
max_length = 5
select_all_on_focus = true

[node name="Runtime" type="Node" parent="."]
script = ExtResource("4_15wji")
environmentMask = 1
lockonObstructionMask = 65
particleCollisionLayer = 32
particleCollisionMask = 59
DefaultCompletionLockout = ExtResource("3_2cwqh")
SkillList = ExtResource("5_32mxc")
pearlScene = ExtResource("7_wy237")

[node name="SaveManager" type="Node" parent="."]
script = ExtResource("4_au3sm")

[node name="PhysicsManager" type="Node3D" parent="."]
script = ExtResource("2_phpky")

[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options/DebugRays" to="DebugManager" method="ToggleRays"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options/StageCulling" to="DebugManager" method="ToggleStageCulling"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options/UnlockAllStages" to="DebugManager" method="ToggleUnlockStages"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Debug/Options/CameraPosition" to="DebugManager" method="ToggleCamera"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/Countdown" to="DebugManager" method="ToggleCountdown"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/InfiniteSoul" to="DebugManager" method="ToggleInfiniteSoul"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/InfiniteRing" to="DebugManager" method="ToggleInfiniteRings"]
[connection signal="pressed" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/SavePosition" to="DebugManager" method="SaveCustomCheckpoint"]
[connection signal="pressed" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/LoadPosition" to="DebugManager" method="LoadCustomCheckpoint"]
[connection signal="item_selected" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/SkillSelect" to="DebugManager" method="OnSkillSelected"]
[connection signal="value_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/SkillAugment" to="DebugManager" method="OnSkillAugmentChanged"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Gameplay/Options/SkillToggle" to="DebugManager" method="OnSkillToggled"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/HUD" to="DebugManager" method="ToggleHUD"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/Reticle" to="DebugManager" method="ToggleReticle"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/Countdown" to="DebugManager" method="ToggleCountdownVisibility"]
[connection signal="toggled" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/Dialog" to="DebugManager" method="ToggleDialog"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/X" to="DebugManager" method="UpdateCamData"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/Y" to="DebugManager" method="UpdateCamData"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamPosition/Z" to="DebugManager" method="UpdateCamData"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Pitch" to="DebugManager" method="UpdateCamData"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Yaw" to="DebugManager" method="UpdateCamData"]
[connection signal="text_changed" from="DebugManager/CanvasLayer/Menu/Tabs/Promo/Options/CamRotation/Roll" to="DebugManager" method="UpdateCamData"]
